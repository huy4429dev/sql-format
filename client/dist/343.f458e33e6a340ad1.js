"use strict";(self.webpackChunkWebSPA=self.webpackChunkWebSPA||[]).push([[343],{4343:(ne,b,r)=>{r.r(b),r.d(b,{UserModule:()=>ie});var d=r(9808),m=r(8505),e=r(4893),T=r(9305);let _=(()=>{class n{constructor(t){this.dataService=t,this.endpoint="http://18.168.249.212/api/user/"}getAll(t){return this.dataService.get(this.endpoint,t).pipe((0,m.b)(i=>i))}store(t){return this.dataService.post(this.endpoint+"add",t).pipe((0,m.b)(i=>!0))}edit(t){return this.dataService.putWithId(this.endpoint+"update/"+t.user_id,t).pipe((0,m.b)(i=>!0))}delete(t){return this.dataService.delete(this.endpoint+"delete/"+t)}getRoleName(){return this.dataService.get(this.endpoint+"getRoleName").pipe((0,m.b)(t=>t))}bulkDelete(t){return this.dataService.delete(this.endpoint+"delete_multiple",{body:{ids:t}})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(T.D))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var c=r(8168),C=r(7579),A=r(1135),x=r(2722),S=r(8372),g=r(8746),Z=r(2313),h=r(7596),f=r(5075),k=r(5517),y=r(2267),v=r(9966),l=r(2382);function U(n,s){1&n&&(e.TgZ(0,"div"),e._uU(1," Email is required. "),e.qZA())}function q(n,s){if(1&n&&(e.TgZ(0,"div",36),e.YNc(1,U,2,0,"div",37),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.userForm.get("email").errors.required)}}function I(n,s){if(1&n&&(e.TgZ(0,"option",38),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",null==t?null:t.role),e.xp6(1),e.Oqu(null==t?null:t.role)}}function w(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",39),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.handleSubmit())}),e._uU(2," Save "),e.qZA(),e.BQk()}}function J(n,s){1&n&&(e.TgZ(0,"button",40),e._UZ(1,"span",41),e.qZA())}let L=(()=>{class n{constructor(t,i,o,a,u){this.fb=t,this.userService=i,this.loadingService=o,this.notifyService=a,this.router=u,this.model=null,this.onClose=new e.vpe,this.onOk=new e.vpe,this.ngSelectStatus=0,this.isHandling=!1,this.ngSelectAdminStatus=!0,this.backDrop=document.querySelector(".modal-backdrop")}ngOnInit(){this.fetchDataUser(),this.backDrop.style.display="block",this.userForm=this.fb.group({email:[this.model.email,l.kI.required],role:[this.model.role],status:[this.model.status],password:[this.model.password],status_admin:[this.model.status_admin]}),this.roleValue=this.model.role,this.ngSelectStatus=this.model.status,this.ngSelectAdminStatus=this.model.status_admin}saveRoles(t){let i=this.dataUser.find(o=>(null==o?void 0:o.role)===t.target.value);this.roleValue=i.role}fetchDataUser(){this.loadingService.isLoading.next(!0),this.userService.getRoleName().pipe((0,g.x)(()=>{this.loadingService.isLoading.next(!1)})).subscribe({next:t=>{var i;!t||(this.dataUser=null!==(i=null==t?void 0:t.data)&&void 0!==i?i:[])},error:t=>{var i;this.notifyService.pushNotify.next({type:"error",message:null!==(i=null==t?void 0:t.message)&&void 0!==i?i:"error"})}})}handleSubmit(){var t,i;if(!this.userForm.valid)return;const o={user_id:this.model.user_id,email:this.userForm.get("email").value,password:null!==(t=this.userForm.get("password").value)&&void 0!==t?t:"",role:null!==(i=this.userForm.get("role").value)&&void 0!==i?i:"user",status:this.userForm.get("status").value,status_admin:this.userForm.get("status_admin").value};let a={};this.userService.edit(o).pipe((0,g.x)(()=>{this.loadingService.isLoading.next(!1),this.notifyService.pushNotify.next(a)})).subscribe({next:()=>{a={type:"success",message:"update user success"};for(const u in o)this.model[u]=o[u];this.onClose.emit(!0)},error:u=>{var p;a={type:"error",message:null!==(p=null==u?void 0:u.message)&&void 0!==p?p:"error"}},complete:()=>{this.isHandling=!0,this.removeValidators(),this.userForm.reset(),this.closeModal()}})}closeModal(){this.onClose.emit(!0)}ngOnDestroy(){this.backDrop.style.display="none"}removeValidators(){var t,i;for(const o in this.userForm.controls)null===(t=this.userForm.get(o))||void 0===t||t.clearValidators(),null===(i=this.userForm.get(o))||void 0===i||i.updateValueAndValidity()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.qu),e.Y36(_),e.Y36(h.b),e.Y36(f.c),e.Y36(c.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-user-edit-item"]],inputs:{model:"model"},outputs:{onClose:"onClose",onOk:"onOk"},decls:51,vars:8,consts:[["tabindex","-1","role","dialog",1,"modal","fade","show",2,"display","flex","align-items","center","justify-content","center",3,"click"],[1,"modal-content",2,"width","72%",3,"click"],[1,"modal-header"],["id","mySmallModalLabel",1,"modal-title","h4"],["type","button","data-dismiss","modal","aria-label","Close",1,"btn","btn-xs","btn-icon","btn-ghost-secondary",3,"click"],[1,"tio-clear","tio-lg"],[1,"modal-body"],[1,"container","pb-5"],[3,"formGroup"],[1,"mb-3"],["for","email",1,"form-label","fw-bold"],["type","text","id","email","formControlName","email",1,"form-control"],["class","alert alert-danger mt-2",4,"ngIf"],["for","password",1,"form-label","fw-bold"],[1,"col-sm-9"],["type","password","id","password","formControlName","password",1,"form-control"],[1,"mb-3","col-xxl-1","col-md-2","col-sm-3"],["for","role",1,"form-label","fw-bold"],[1,"col-sm-2"],["type","text","list","roles","formControlName","role",1,"form-control",2,"width","133px",3,"ngModel","ngModelChange","change"],["id","roles"],[3,"value",4,"ngFor","ngForOf"],[1,"mb-3",2,"width","133px"],["for","status",1,"form-label","fw-bold"],["aria-label","status","formControlName","status",1,"form-select",3,"ngModel","ngModelChange"],["value","0"],["value","1"],["value","2"],["for","status_admin",1,"form-label","fw-bold"],["aria-label","status_admin","formControlName","status_admin",1,"form-select",3,"ngModel","ngModelChange"],["value","false"],["value","true"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-sm","btn-white",3,"click"],[4,"ngIf","ngIfElse"],["notHandle",""],[1,"alert","alert-danger","mt-2"],[4,"ngIf"],[3,"value"],["type","submit",1,"btn","btn-sm","btn-warning",3,"click"],["disabled","","type","button",1,"btn","btn-sm","btn-warning","btn-loader"],[1,"loader"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.NdJ("click",function(){return i.closeModal()}),e.TgZ(1,"div",1),e.NdJ("click",function(a){return a.stopPropagation()}),e.TgZ(2,"div",2)(3,"h5",3),e._uU(4,"Update action"),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return i.closeModal()}),e._UZ(6,"i",5),e.qZA()(),e.TgZ(7,"div",6)(8,"div",7)(9,"form",8)(10,"div",9)(11,"label",10),e._uU(12,"Email"),e.qZA(),e._UZ(13,"input",11),e.YNc(14,q,2,1,"div",12),e.qZA(),e.TgZ(15,"div",9)(16,"label",13),e._uU(17,"Password"),e.qZA(),e.TgZ(18,"div",14),e._UZ(19,"input",15),e.qZA()(),e.TgZ(20,"div",16)(21,"label",17),e._uU(22,"Role"),e.qZA(),e.TgZ(23,"div",18)(24,"input",19),e.NdJ("ngModelChange",function(a){return i.roleValue=a})("change",function(a){return i.saveRoles(a)}),e.qZA(),e.TgZ(25,"datalist",20),e.YNc(26,I,2,2,"option",21),e.qZA()()(),e.TgZ(27,"div",22)(28,"label",23),e._uU(29,"Status"),e.qZA(),e.TgZ(30,"select",24),e.NdJ("ngModelChange",function(a){return i.ngSelectStatus=a}),e.TgZ(31,"option",25),e._uU(32,"Active"),e.qZA(),e.TgZ(33,"option",26),e._uU(34,"Block"),e.qZA(),e.TgZ(35,"option",27),e._uU(36,"Waiting"),e.qZA()()(),e.TgZ(37,"div",22)(38,"label",28),e._uU(39,"Admin Status"),e.qZA(),e.TgZ(40,"select",29),e.NdJ("ngModelChange",function(a){return i.ngSelectAdminStatus=a}),e.TgZ(41,"option",30),e._uU(42,"No"),e.qZA(),e.TgZ(43,"option",31),e._uU(44,"Yes"),e.qZA()()()()()(),e.TgZ(45,"div",32)(46,"button",33),e.NdJ("click",function(){return i.closeModal()}),e._uU(47,"Cancel"),e.qZA(),e.YNc(48,w,3,0,"ng-container",34),e.YNc(49,J,2,0,"ng-template",null,35,e.W1O),e.qZA()()()),2&t){const o=e.MAs(50);e.xp6(9),e.Q6J("formGroup",i.userForm),e.xp6(5),e.Q6J("ngIf",i.userForm.get("email").invalid&&(i.userForm.get("email").dirty||i.userForm.get("email").touched)),e.xp6(10),e.Q6J("ngModel",i.roleValue),e.xp6(2),e.Q6J("ngForOf",i.dataUser),e.xp6(4),e.Q6J("ngModel",i.ngSelectStatus),e.xp6(10),e.Q6J("ngModel",i.ngSelectAdminStatus),e.xp6(8),e.Q6J("ngIf",!i.isHandling)("ngIfElse",o)}},dependencies:[d.sg,d.O5,l._Y,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.JL,l.sg,l.u],encapsulation:2}),n})();function N(n,s){1&n&&(e.TgZ(0,"li",8)(1,"button",28),e._uU(2,"Create"),e.qZA()()),2&n&&(e.xp6(1),e.Q6J("routerLink","create"))}function F(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.popupState.bulkDelete=!0)}),e._uU(1," Delete Users "),e.qZA()}}function M(n,s){if(1&n&&(e.TgZ(0,"li",8),e.YNc(1,F,2,0,"button",29),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isActiveAdmin&&t.hasItemDelete)}}function O(n,s){1&n&&(e.TgZ(0,"th",17),e._uU(1,"Action"),e.qZA())}function E(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"td",33)(1,"button",34),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,a=e.oxw();return e.KtG(a.handleEdit(o))}),e.O4$(),e.TgZ(2,"svg",35),e._UZ(3,"path",36),e.qZA()(),e.kcU(),e.TgZ(4,"button",37),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,a=e.oxw();return e.KtG(a.handleDelete(o))}),e.O4$(),e.TgZ(5,"svg",38),e._UZ(6,"path",39),e.qZA()()()}}const D=function(n){return{color:n}};function Y(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td",15)(2,"input",16),e.NdJ("change",function(o){const u=e.CHM(t).index,p=e.oxw();return e.KtG(p.checkItem(o,u))}),e.qZA()(),e.TgZ(3,"td",19),e._uU(4),e.qZA(),e.TgZ(5,"td",19),e._uU(6),e.qZA(),e.TgZ(7,"td",19),e._uU(8),e.qZA(),e.TgZ(9,"td",19),e._uU(10),e.qZA(),e.TgZ(11,"td",19),e._uU(12),e.qZA(),e.TgZ(13,"td",31),e._uU(14),e.qZA(),e.TgZ(15,"td",19),e._uU(16),e.qZA(),e.YNc(17,E,7,0,"td",32),e.qZA()}if(2&n){const t=s.$implicit,i=e.oxw();e.xp6(2),e.Q6J("checked",t.checked),e.xp6(2),e.Oqu(t.user_id),e.xp6(2),e.Oqu(t.email),e.xp6(2),e.Oqu(t.role),e.xp6(2),e.Oqu(t.created_at),e.xp6(2),e.Oqu(t.lastLogin),e.xp6(1),e.Q6J("ngStyle",e.VKq(10,D,0==t.status?"green":1==t.status?"red":"orange")),e.xp6(1),e.hij(" ",0==t.status?"Active":1==t.status?"Block":"Waiting"," "),e.xp6(2),e.Oqu(t.status_admin?"Enable":"Disable"),e.xp6(1),e.Q6J("ngIf",i.isActiveAdmin)}}function Q(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"app-user-edit-item",40),e.NdJ("onOk",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.okDelete())})("onClose",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.popupState.edit=!1)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("model",t.itemHandle)}}function H(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"app-popup-delete",41),e.NdJ("onOk",function(){e.CHM(t);const o=e.oxw();return o.popupState.delete=!1,e.KtG(o.okDelete())})("onClose",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.popupState.delete=!1)}),e.qZA()}2&n&&e.Q6J("isHandling",!1)}function P(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"app-popup-delete",41),e.NdJ("onOk",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.okBulkDelete())})("onClose",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.popupState.bulkDelete=!1)}),e.qZA()}2&n&&e.Q6J("isHandling",!1)}const B=function(n,s,t){return{itemsPerPage:n,currentPage:s,totalItems:t}},R=function(n,s){return{total:n,count:s}};function G(n,s){1&n&&(e.TgZ(0,"p",45),e._uU(1,"Account has been sucessfully created. Please copy the credentials below and send to the user"),e.qZA())}function V(n,s){if(1&n&&(e.TgZ(0,"option",46),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",null==t?null:t.role),e.xp6(1),e.Oqu(null==t?null:t.role)}}function K(n,s){if(1&n&&(e.TgZ(0,"div",40),e._UZ(1,"div",41),e.TgZ(2,"div",42)(3,"div")(4,"p"),e._uU(5),e.qZA(),e.TgZ(6,"p"),e._uU(7),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(3),e.Akn("padding:15px;width:300px;background: #fff; border: 1px solid #dcdcdc;color:#b66a6a;"),e.xp6(2),e.hij("Email: ",t.email,""),e.xp6(2),e.hij("Password: ",t.password,"")}}const $=[{path:"",component:(()=>{class n{constructor(t,i,o,a){this.titleService=t,this.userService=i,this.loadingService=o,this.notifyService=a,this.unsubscribe=new C.x,this.filterInput=new A.X({page:1,page_size:10,email:null,role:null,enabled:null}),this.config={itemsPerPage:2,currentPage:1,totalItems:0},this.data=[],this.p=1,this.itemHandle=null,this.popupState={isHandling:!1,edit:!1,delete:!1,bulkDelete:!1},this.hasItemDelete=!1,this.isCheckAllItem=!1,this.titleService.setTitle("Manager User"),this.loadingService.isLoading.next(!0)}ngOnDestroy(){this.unsubscribe.next(null),this.unsubscribe.complete()}ngOnInit(){this.subsribeFilter(),this.isActiveAdmin=1!=JSON.parse(localStorage.getItem("status"))&&2!=JSON.parse(localStorage.getItem("status"))}subsribeFilter(){this.filterInput.pipe((0,x.R)(this.unsubscribe),(0,m.b)(()=>{this.loadingService.isLoading.next(!0)}),(0,S.b)(500)).subscribe(()=>{this.fetchData()})}fetchData(){this.resetPopupState(),this.loadingService.isLoading.next(!0),this.userService.getAll(this.filterInput.value).pipe((0,g.x)(()=>{this.loadingService.isLoading.next(!1)})).subscribe({next:t=>{var i;!t||(this.data=null!==(i=null==t?void 0:t.data)&&void 0!==i?i:[],this.config.totalItems=t.pagination.total_records,this.config.itemsPerPage=t.pagination.page_size)},error:t=>{var i;this.notifyService.pushNotify.next({type:"error",message:null!==(i=null==t?void 0:t.message)&&void 0!==i?i:"error"})}})}setPageSize(t){this.filterInput.next(Object.assign(Object.assign({},this.filterInput.value),{page_size:t}))}pageChanged(t){this.filterInput.next(Object.assign(Object.assign({},this.filterInput.value),{page:t}))}filter(t,i){this.filterInput.next(Object.assign(Object.assign({},this.filterInput.value),{[t]:i.target.value}))}checkItem(t,i){this.data[i].checked=t.target.checked,this.setCheckAllItem(),this.showDeleteBtn()}checkAllItem(t){const i=t.target.checked;i&&(this.isCheckAllItem=!0),this.data.forEach(o=>{o.checked=i}),this.showDeleteBtn()}setCheckAllItem(){this.isCheckAllItem=!!this.data.every(t=>t.checked)}showDeleteBtn(){this.hasItemDelete=!!this.data.some(t=>t.checked)}handleEdit(t){this.itemHandle=t,this.resetPopupState(),this.popupState.edit=!0}handleDelete(t){this.itemHandle=t,this.resetPopupState(),this.popupState.delete=!0}okDelete(){this.loadingService.isLoading.next(!0),this.userService.delete(this.itemHandle.user_id).subscribe({next:()=>{this.fetchData()},error:t=>{var i;this.notifyService.pushNotify.next({type:"error",message:null!==(i=null==t?void 0:t.message)&&void 0!==i?i:"error"}),this.loadingService.isLoading.next(!1)}})}okBulkDelete(){this.loadingService.isLoading.next(!0),this.userService.bulkDelete(this.data.filter(t=>t.checked).map(t=>t.user_id)).subscribe({next:()=>{this.fetchData()},error:t=>{var i;this.notifyService.pushNotify.next({type:"error",message:null!==(i=null==t?void 0:t.message)&&void 0!==i?i:"error"}),this.loadingService.isLoading.next(!1)}})}resetPopupState(){for(const t in this.popupState)this.popupState[t]=!1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Z.Dx),e.Y36(_),e.Y36(h.b),e.Y36(f.c))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-list"]],decls:64,vars:19,consts:[[1,"container","mt-3","bg-light","rounded-3"],["aria-label","breadcrumb bg-light"],[1,"breadcrumb","p-1"],[1,"breadcrumb-item"],["href","#",1,"text-decoration-none"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container"],["id","myTab","role","tablist",1,"nav","nav-tabs"],["role","presentation",1,"nav-item"],["id","users-tab","data-bs-toggle","tab","data-bs-target","#users","type","button","role","tab","aria-controls","users","aria-selected","true",1,"nav-link","active"],["class","nav-item","role","presentation",4,"ngIf"],["id","myTabContent",1,"tab-content"],["id","users","role","tabpanel","aria-labelledby","users-tab",1,"tab-pane","fade","show","active"],[1,"table-responsive","mt-4"],["data-bs-spy","scroll",1,"table","table-striped","table-hover","table-bordered"],["scope","col","colspan","1"],["type","checkbox",1,"form-check-input",3,"checked","change"],["scope","col","colspan","4",1,"text-primary","text-center"],["scope","col","class"," text-primary text-center","colspan","4",4,"ngIf"],["scope","col","colspan","4"],[1,"form-control",3,"keyup"],["scope","col","colspan","2"],[4,"ngFor","ngForOf"],[1,"d-flex","align-items-center",2,"gap","10"],[3,"model","onOk"],[3,"pageChange"],[3,"model","onOk","onClose",4,"ngIf"],[3,"isHandling","onOk","onClose",4,"ngIf"],["id","create-tab","data-bs-toggle","tab","data-bs-target","#create","type","button","role","tab","aria-controls","create","aria-selected","false",1,"nav-link",3,"routerLink"],["class","btn btn-danger text-white","style","margin-left: 8px",3,"click",4,"ngIf"],[1,"btn","btn-danger","text-white",2,"margin-left","8px",3,"click"],["scope","col","colspan","4",3,"ngStyle"],["scope","col","colspan","2","style","display: flex;",4,"ngIf"],["scope","col","colspan","2",2,"display","flex"],[1,"p-0","mx-2","btn","btn-link",3,"click"],["color","#2F80ED","xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-pen"],["d","m13.498.795.149-.149a1.207 1.207 0 1 1 1.707 1.708l-.149.148a1.5 1.5 0 0 1-.059 2.059L4.854 14.854a.5.5 0 0 1-.233.131l-4 1a.5.5 0 0 1-.606-.606l1-4a.5.5 0 0 1 .131-.232l9.642-9.642a.5.5 0 0 0-.642.056L6.854 4.854a.5.5 0 1 1-.708-.708L9.44.854A1.5 1.5 0 0 1 11.5.796a1.5 1.5 0 0 1 1.998-.001zm-.644.766a.5.5 0 0 0-.707 0L1.95 11.756l-.764 3.057 3.057-.764L14.44 3.854a.5.5 0 0 0 0-.708l-1.585-1.585z"],[1,"p-0","btn","btn-link",3,"click"],["color","#2F80ED","xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-trash3"],["d","M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z"],[3,"model","onOk","onClose"],[3,"isHandling","onOk","onClose"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),e._uU(5,"Home"),e.qZA()(),e.TgZ(6,"li",5),e._uU(7,"Manage Users"),e.qZA()()()(),e.TgZ(8,"div",6)(9,"ul",7)(10,"li",8)(11,"button",9),e._uU(12,"Users"),e.qZA()(),e.YNc(13,N,3,1,"li",10),e.YNc(14,M,2,1,"li",10),e.qZA(),e.TgZ(15,"div",11)(16,"div",12)(17,"div",13)(18,"table",14)(19,"thead")(20,"tr")(21,"th",15)(22,"input",16),e.NdJ("change",function(a){return i.checkAllItem(a)}),e.qZA()(),e.TgZ(23,"th",17),e._uU(24,"Id"),e.qZA(),e.TgZ(25,"th",17),e._uU(26,"Email"),e.qZA(),e.TgZ(27,"th",17),e._uU(28,"Role"),e.qZA(),e.TgZ(29,"th",17),e._uU(30,"Registration Time"),e.qZA(),e.TgZ(31,"th",17),e._uU(32,"Last Login"),e.qZA(),e.TgZ(33,"th",17),e._uU(34,"Status"),e.qZA(),e.TgZ(35,"th",17),e._uU(36,"Admin Status"),e.qZA(),e.YNc(37,O,2,0,"th",18),e.qZA(),e.TgZ(38,"tr"),e._UZ(39,"th",15),e.TgZ(40,"th",19)(41,"input",20),e.NdJ("keyup",function(a){return i.filter("user_id",a)}),e.qZA()(),e.TgZ(42,"th",19)(43,"input",20),e.NdJ("keyup",function(a){return i.filter("email",a)}),e.qZA()(),e.TgZ(44,"th",19)(45,"input",20),e.NdJ("keyup",function(a){return i.filter("role",a)}),e.qZA()(),e.TgZ(46,"th",19)(47,"input",20),e.NdJ("keyup",function(a){return i.filter("registrationTime",a)}),e.qZA()(),e.TgZ(48,"th",19)(49,"input",20),e.NdJ("keyup",function(a){return i.filter("lastLogin",a)}),e.qZA()(),e.TgZ(50,"th",19)(51,"input",20),e.NdJ("keyup",function(a){return i.filter("enabled",a)}),e.qZA()(),e.TgZ(52,"th",19)(53,"input",20),e.NdJ("keyup",function(a){return i.filter("adminStatus",a)}),e.qZA()(),e._UZ(54,"th",21),e.qZA()(),e.TgZ(55,"tbody"),e.YNc(56,Y,18,12,"tr",22),e.ALo(57,"paginate"),e.qZA()()()()(),e.TgZ(58,"div",23)(59,"app-menu-pagination",24),e.NdJ("onOk",function(a){return i.setPageSize(a)}),e.qZA(),e.TgZ(60,"pagination-controls",25),e.NdJ("pageChange",function(a){return i.p=a})("pageChange",function(a){return i.pageChanged(a)}),e.qZA()()(),e.YNc(61,Q,1,1,"app-user-edit-item",26),e.YNc(62,H,1,1,"app-popup-delete",27),e.YNc(63,P,1,1,"app-popup-delete",27)),2&t&&(e.xp6(13),e.Q6J("ngIf",i.isActiveAdmin),e.xp6(1),e.Q6J("ngIf",i.isActiveAdmin),e.xp6(8),e.Q6J("checked",i.isCheckAllItem),e.xp6(15),e.Q6J("ngIf",i.isActiveAdmin),e.xp6(19),e.Q6J("ngForOf",e.xi3(57,9,i.data,e.kEZ(12,B,i.config.itemsPerPage,i.p,i.config.totalItems))),e.xp6(3),e.Q6J("model",e.WLB(16,R,null==i.config?null:i.config.totalItems,null==i.data?null:i.data.length)),e.xp6(2),e.Q6J("ngIf",i.popupState.edit),e.xp6(1),e.Q6J("ngIf",i.popupState.delete),e.xp6(1),e.Q6J("ngIf",i.popupState.bulkDelete))},dependencies:[d.sg,d.O5,d.PC,k.w,y.V,c.rH,v.LS,L,v._s]}),n})()},{path:"create",component:(()=>{class n{constructor(t,i,o,a,u,p){this.titleService=t,this.fb=i,this.userService=o,this.loadingService=a,this.notifyService=u,this.router=p,this.isSuccess=!1,this.showEmail=!1,this.loadingService.isLoading.next(!0),this.titleService.setTitle("Manager User"),this.userForm=this.fb.group({email:["",l.kI.required],password:["",l.kI.required],role:[""],status:["0"],status_admin:[!0]})}saveRoles(t){let i=this.dataUser.find(o=>(null==o?void 0:o.role)===t.target.value);this.roleValue=i.role}ngOnInit(){this.fetchDataUser()}fetchDataUser(){this.loadingService.isLoading.next(!0),this.userService.getRoleName().pipe((0,g.x)(()=>{this.loadingService.isLoading.next(!1)})).subscribe({next:t=>{var i;!t||(this.dataUser=null!==(i=null==t?void 0:t.data)&&void 0!==i?i:[])},error:t=>{var i;this.notifyService.pushNotify.next({type:"error",message:null!==(i=null==t?void 0:t.message)&&void 0!==i?i:"error"})}})}onSubmit(){var t;if(!this.userForm.valid)return;this.loadingService.isLoading.next(!0);const i={email:this.userForm.get("email").value,password:this.userForm.get("password").value,role:null!==(t=this.roleValue)&&void 0!==t?t:this.userForm.get("role").value,status:this.userForm.get("status").value,status_admin:this.userForm.get("status_admin").value};let o={};this.userService.store(i).pipe((0,g.x)(()=>{this.loadingService.isLoading.next(!1),this.notifyService.pushNotify.next(o)})).subscribe({next:()=>{o={type:"success",message:"create recipe success"},this.isSuccess=!0,this.showEmail=!0,this.email=i.email,this.password=i.password,this.userForm.reset()},error:a=>{var u;o={type:"error",message:null!==(u=null==a?void 0:a.message)&&void 0!==u?u:"error"}}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Z.Dx),e.Y36(l.qu),e.Y36(_),e.Y36(h.b),e.Y36(f.c),e.Y36(c.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-create"]],decls:69,vars:6,consts:[[1,"container","mt-3","bg-light","rounded-3"],["aria-label","breadcrumb bg-light"],[1,"breadcrumb","p-1"],[1,"breadcrumb-item"],["href","#",1,"text-decoration-none"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container"],["id","myTab","role","tablist",1,"nav","nav-tabs"],["role","presentation",1,"nav-item"],["id","users-tab","data-bs-toggle","tab","data-bs-target","#users","type","button","role","tab","aria-controls","users","aria-selected","true",1,"nav-link",3,"routerLink"],["id","create-tab","data-bs-toggle","tab","data-bs-target","#create","type","button","role","tab","aria-controls","create","aria-selected","false",1,"nav-link","active"],["id","create","role","tabpanel","aria-labelledby","create-tab",1,"tab-pane"],[1,"row","mt-4","gx-3"],[1,"col-xl-3","col-sm-6"],[1,"p-2","text-center","border"],[1,"btn","btn-primary-custom","btn-lg","text-white","w-100"],[1,"col-xl-9","col-sm-6"],[3,"formGroup"],[1,"p-4","border"],["class","text-center text-primary-custom",4,"ngIf"],[1,"mb-3","row"],["for","email",1,"col-sm-3","col-form-label","text-end"],[1,"col-sm-9"],["type","text","id","email","value","","formControlName","email",1,"form-control"],["for","password",1,"col-sm-3","col-form-label","text-end"],["type","password","id","password","value","","formControlName","password",1,"form-control"],["for","role",1,"col-sm-3","col-form-label","text-end"],[1,"col-sm-2"],["type","text","list","roles","formControlName","role",1,"form-control",3,"ngModel","ngModelChange","change"],["id","roles"],[3,"value",4,"ngFor","ngForOf"],["for","status",1,"col-sm-3","col-form-label","text-end"],["aria-label","status","formControlName","status",1,"form-select"],["value","0","selected",""],["value","1"],["value","2"],["for","status_admin",1,"col-sm-3","col-form-label","text-end"],["aria-label","status_admin","formControlName","status_admin",1,"form-select"],["value","false"],["value","true","selected",""],[1,"row","mt-4","px-4"],[1,"col-3"],[1,"col-9"],[1,"w-100","btn","btn-success-custom","text-white",3,"click"],["class","row mt-4 px-4",4,"ngIf"],[1,"text-center","text-primary-custom"],[3,"value"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),e._uU(5,"Home"),e.qZA()(),e.TgZ(6,"li",5),e._uU(7,"Manage Users"),e.qZA()()()(),e.TgZ(8,"div",6)(9,"ul",7)(10,"li",8)(11,"button",9),e._uU(12,"Users"),e.qZA()(),e.TgZ(13,"li",8)(14,"button",10),e._uU(15,"Create"),e.qZA()()(),e.TgZ(16,"div",11)(17,"div",12)(18,"div",13)(19,"div",14)(20,"button",15),e._uU(21,"Account Information"),e.qZA()()(),e.TgZ(22,"div",16)(23,"form",17)(24,"div",18),e.YNc(25,G,2,0,"p",19),e.TgZ(26,"div",20)(27,"label",21),e._uU(28,"Email"),e.qZA(),e.TgZ(29,"div",22),e._UZ(30,"input",23),e.qZA()(),e.TgZ(31,"div",20)(32,"label",24),e._uU(33,"Password"),e.qZA(),e.TgZ(34,"div",22),e._UZ(35,"input",25),e.qZA()(),e.TgZ(36,"div",20)(37,"label",26),e._uU(38,"Role"),e.qZA(),e.TgZ(39,"div",27)(40,"input",28),e.NdJ("ngModelChange",function(a){return i.roleValue=a})("change",function(a){return i.saveRoles(a)}),e.qZA(),e.TgZ(41,"datalist",29),e.YNc(42,V,2,2,"option",30),e.qZA()()(),e.TgZ(43,"div",20)(44,"label",31),e._uU(45,"Status"),e.qZA(),e.TgZ(46,"div",27)(47,"select",32)(48,"option",33),e._uU(49,"Active"),e.qZA(),e.TgZ(50,"option",34),e._uU(51,"Block"),e.qZA(),e.TgZ(52,"option",35),e._uU(53,"Waiting"),e.qZA()()()(),e.TgZ(54,"div",20)(55,"label",36),e._uU(56,"Admin Status"),e.qZA(),e.TgZ(57,"div",27)(58,"select",37)(59,"option",38),e._uU(60,"No"),e.qZA(),e.TgZ(61,"option",39),e._uU(62,"Yes"),e.qZA()()()()(),e.TgZ(63,"div",40),e._UZ(64,"div",41),e.TgZ(65,"div",42)(66,"button",43),e.NdJ("click",function(){return i.onSubmit()}),e._uU(67,"Save"),e.qZA()()(),e.YNc(68,K,8,4,"div",44),e.qZA()()()()()),2&t&&(e.xp6(11),e.Q6J("routerLink","/admin/user"),e.xp6(12),e.Q6J("formGroup",i.userForm),e.xp6(2),e.Q6J("ngIf",i.isSuccess),e.xp6(15),e.Q6J("ngModel",i.roleValue),e.xp6(2),e.Q6J("ngForOf",i.dataUser),e.xp6(26),e.Q6J("ngIf",i.showEmail))},dependencies:[d.sg,d.O5,c.rH,l._Y,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.JL,l.sg,l.u]}),n})(),canActivate:[r(2385).D]}];let X=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[c.Bz.forChild($),c.Bz]}),n})();var ee=r(8395),te=r(8704);let ie=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[_],imports:[d.ez,ee.m,X,l.UX,l.u5,te.nm.forRoot(),v.JX]}),n})()}}]);