"use strict";(self.webpackChunkWebSPA=self.webpackChunkWebSPA||[]).push([[413],{6413:(O,b,l)=>{l.r(b),l.d(b,{PortalModule:()=>H});var c=l(9808),d=l(8505),e=l(4893),y=l(9305);let p=(()=>{class o{constructor(t){this.dataService=t,this.repipeUrl="http://18.168.249.212/api/user/"}register(t){return this.dataService.post(this.repipeUrl+"register",t).pipe((0,d.b)(i=>!0))}login(t){return this.dataService.post(this.repipeUrl+"login",t).pipe((0,d.b)(i=>!0))}logout(){localStorage.clear(),window.location.href="/"}verifyGoogleToken(t){return this.dataService.post(this.repipeUrl+"verify_google_token",t).pipe((0,d.b)(i=>!0))}getRoleName(){return this.dataService.get(this.repipeUrl+"getRoleName").pipe((0,d.b)(t=>t))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(y.D))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();var u=l(8168);function _(o,n){1&o&&(e.TgZ(0,"a",14),e._uU(1,"Login"),e.qZA())}function x(o,n){1&o&&(e.TgZ(0,"a",15),e._uU(1,"Admin"),e.qZA())}const S=function(o){return{"text-active":o}};let U=(()=>{class o{constructor(t,i){this.router=t,this.portalService=i,this.isHome=!1,this.isLogin=localStorage.getItem("token"),this.router.events.subscribe(r=>{r instanceof u.m2&&("/"===r.url?(this.isHome=!0,this.isLogin=localStorage.getItem("token")):this.isHome=!1)})}ngOnInit(){console.log(window.location.pathname,"pathname")}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.F0),e.Y36(p))},o.\u0275cmp=e.Xpm({type:o,selectors:[["portal-header"]],decls:18,vars:5,consts:[[2,"background-color","#180A34"],[1,"container","navbar","navbar-expand-lg","navbar-light"],[1,"container-fluid"],["href","/",1,"navbar-brand","text-white","fs-5"],["src","https://app.dev.kleene.ai/img/branding/logo-large-2022.svg","width","100","height","25"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarText","aria-controls","navbarText","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarText",1,"collapse","navbar-collapse","justify-content-end"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0","m-0",2,"margin","0 !important"],[1,"nav-item"],["routerLink","/",1,"nav-link","text-white",3,"ngClass"],["class","nav-link text-white","routerLink","/login","routerLinkActive","text-active",4,"ngIf"],["class","nav-link text-white","routerLink","/admin/dashboard",4,"ngIf"],["routerLink","/docs","routerLinkActive","text-active",1,"nav-link","text-white"],["routerLink","/login","routerLinkActive","text-active",1,"nav-link","text-white"],["routerLink","/admin/dashboard",1,"nav-link","text-white"]],template:function(t,i){1&t&&(e.TgZ(0,"header",0)(1,"nav",1)(2,"div",2)(3,"a",3),e._UZ(4,"img",4),e.qZA(),e.TgZ(5,"button",5),e._UZ(6,"span",6),e.qZA(),e.TgZ(7,"div",7)(8,"ul",8)(9,"li",9)(10,"a",10),e._uU(11,"Home"),e.qZA()(),e.TgZ(12,"li",9),e.YNc(13,_,2,0,"a",11),e.YNc(14,x,2,0,"a",12),e.qZA(),e.TgZ(15,"li",9)(16,"a",13),e._uU(17,"Docs"),e.qZA()()()()()()()),2&t&&(e.xp6(10),e.Q6J("ngClass",e.VKq(3,S,i.isHome)),e.xp6(3),e.Q6J("ngIf",!i.isLogin),e.xp6(1),e.Q6J("ngIf",i.isLogin))},dependencies:[c.mk,c.O5,u.yS,u.Od]}),o})(),A=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["portal-footer"]],decls:6,vars:0,consts:[[1,"bg-light","mt-5","py-3"],[1,"container","d-flex","justify-content-between","align-items-center"],[1,"m-0"]],template:function(t,i){1&t&&(e.TgZ(0,"footer",0)(1,"div",1)(2,"p",2),e._uU(3,"\xa9 Kleene.ai 2023"),e.qZA(),e.TgZ(4,"p",2),e._uU(5,"Powered by Recipes"),e.qZA()()())}}),o})(),w=(()=>{class o{ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-portal"]],decls:4,vars:0,consts:[[1,"portal-main"]],template:function(t,i){1&t&&(e._UZ(0,"portal-header"),e.TgZ(1,"div",0),e._UZ(2,"router-outlet"),e.qZA(),e._UZ(3,"portal-footer"))},dependencies:[u.lC,U,A],styles:[".portal-main{min-height:calc(100vh - 180px)}"]}),o})();var g=l(2313);let C=(()=>{class o{constructor(t){this.titleService=t}ngOnInit(){this.titleService.setTitle("DOCS")}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(g.Dx))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-docs"]],decls:15,vars:0,consts:[[1,"container","mt-3","bg-light","rounded-3"],["aria-label","breadcrumb bg-light"],[1,"breadcrumb","p-1"],[1,"breadcrumb-item"],["href","#",1,"text-decoration-none"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container","mt-4"],[1,"fw-bold"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),e._uU(5,"Home"),e.qZA()(),e.TgZ(6,"li",5),e._uU(7,"Docs"),e.qZA()()()(),e.TgZ(8,"div",6)(9,"h2",7),e._uU(10,"Docs"),e.qZA(),e.TgZ(11,"p"),e._uU(12,"This is the documentation page.You may modify the following file to customize its content: "),e._UZ(13,"br"),e._uU(14,"/front-end/docs.html"),e.qZA()())}}),o})(),q=(()=>{class o{constructor(t){this.titleService=t,this.titleService.setTitle("Kleene")}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(g.Dx))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-home"]],decls:26,vars:0,consts:[[1,"container","my-5","py-5"],[1,"row","mt-5","pb-3"],[1,"col-12","text-center"],[1,"fs-1"],[1,"fs-3"],[1,"btn","btn-success","btn-lg","fw-bolder","px-4"],[1,"row","mt-5","pt-5","justify-content-center"],[1,"col-4"],[1,"fs-3","fw-bold"],[1,"btn","btn-outline-secondary"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),e._uU(4,"Recipes"),e.qZA(),e.TgZ(5,"p",4),e._uU(6,"Welcome to the recipe management tool"),e.qZA(),e.TgZ(7,"button",5),e._uU(8,"Get started with "),e._UZ(9,"br"),e._uU(10,"Recipes"),e.qZA()()(),e.TgZ(11,"div",6)(12,"div",7)(13,"h5",8),e._uU(14,"Recipe"),e.qZA(),e.TgZ(15,"p"),e._uU(16,"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur."),e.qZA(),e.TgZ(17,"button",9),e._uU(18,"View Documentation"),e.qZA()(),e.TgZ(19,"div",7)(20,"h5",8),e._uU(21,"Template"),e.qZA(),e.TgZ(22,"p"),e._uU(23,"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur."),e.qZA(),e.TgZ(24,"button",9),e._uU(25,"View Documentation"),e.qZA()()()())}}),o})();var s=l(2382),f=l(8746),Z=l(7596),T=l(5075),v=l(3004);function I(o,n){1&o&&(e.TgZ(0,"div"),e._uU(1," Email invalid. "),e.qZA())}function G(o,n){1&o&&(e.TgZ(0,"div"),e._uU(1," Email invalid. "),e.qZA())}function Y(o,n){if(1&o&&(e.TgZ(0,"div",27),e.YNc(1,G,2,0,"div",28),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.fromGroup.get("email").errors.email)}}function k(o,n){1&o&&(e.TgZ(0,"div"),e._uU(1," Password is required. "),e.qZA())}function R(o,n){if(1&o&&(e.TgZ(0,"div",27),e.YNc(1,k,2,0,"div",28),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.fromGroup.get("password").errors.required)}}function J(o,n){if(1&o&&(e.TgZ(0,"option",29),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",null==t?null:t.role),e.xp6(1),e.Oqu(null==t?null:t.role)}}const N=[{path:"",component:w,children:[{path:"",component:q},{path:"login",component:(()=>{class o{constructor(t,i,r,a,m,h,D){this.titleService=t,this.loadingService=i,this.notifyService=r,this.fb=a,this.portalService=m,this.router=h,this.socialAuthService=D,this.titleService.setTitle("Login"),localStorage.getItem("token")&&this.router.navigate(["/admin/dashboard"]),this.fromGroup=this.fb.group({email:["",[s.kI.required,s.kI.email]],password:["",s.kI.required]})}ngOnInit(){this.socialAuthService.authState.subscribe(t=>{this.socialUser=t,this.isLoggedin=null!=t,this.verifyGoogleToken(this.socialUser.idToken)})}verifyGoogleToken(t){this.loadingService.isLoading.next(!0);let r={};this.portalService.verifyGoogleToken({token:t}).pipe((0,f.x)(()=>{this.loadingService.isLoading.next(!1),this.notifyService.pushNotify.next(r)})).subscribe({next:a=>{if(null==a||!a.token)return this.router.navigate(["/"]);localStorage.setItem("email",a.email),localStorage.setItem("token",a.token),localStorage.setItem("user_id",a.user_id),localStorage.setItem("status",a.status),localStorage.setItem("status_admin",a.status_admin),r={type:"success",message:"login success"},this.router.navigate(["/admin/dashboard"])},error:a=>{var m;r={type:"error",message:null!==(m=null==a?void 0:a.message)&&void 0!==m?m:"error"}}})}onSubmit(){if(!this.fromGroup.valid)return;this.loadingService.isLoading.next(!0);const t={email:this.fromGroup.get("email").value,password:this.fromGroup.get("password").value};let i={};this.portalService.login(t).pipe((0,f.x)(()=>{this.loadingService.isLoading.next(!1),this.notifyService.pushNotify.next(i)})).subscribe({next:r=>{r&&(localStorage.setItem("token",r.token),localStorage.setItem("user_id",r.id),localStorage.setItem("status",r.status),localStorage.setItem("status_admin",r.status_admin),i={type:"success",message:"login success"},this.router.navigate(["/admin/dashboard"]))},error:r=>{var a;i={type:"error",message:null!==(a=null==r?void 0:r.message)&&void 0!==a?a:"error"}}})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(g.Dx),e.Y36(Z.b),e.Y36(T.c),e.Y36(s.qu),e.Y36(p),e.Y36(u.F0),e.Y36(v.xE))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-login"]],decls:31,vars:3,consts:[[1,"container","mt-3","bg-light","rounded-3"],["aria-label","breadcrumb bg-light"],[1,"breadcrumb","p-1"],[1,"breadcrumb-item"],["href","#",1,"text-decoration-none"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container"],[1,"d-flex","justify-content-center",3,"formGroup","ngSubmit"],[1,"card","w-25",2,"width","18rem"],[1,"card-header"],[1,"p-3"],[1,"mb-3"],["for","exampleInputEmail1",1,"form-label","fw-bold"],["formControlName","email","type","email","id","exampleInputEmail1","aria-describedby","emailHelp",1,"form-control"],[4,"ngIf"],["for","exampleInputPassword1",1,"form-label","fw-bold"],["formControlName","password","type","password","id","exampleInputPassword1",1,"form-control"],["type","submit",1,"btn","btn","btn-primary","w-100",3,"disabled"],[1,"d-flex","justify-content-center"],[1,"w-25","text-center","m-3"],["id","login-gg-btn","type","standard","size","large","text","signup_with","width","322"],[1,"mt-2"],["routerLink","/register",1,"text-decoration-none"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),e._uU(5,"Home"),e.qZA()(),e.TgZ(6,"li",5),e._uU(7,"Login"),e.qZA()()()(),e.TgZ(8,"div",6)(9,"form",7),e.NdJ("ngSubmit",function(){return i.onSubmit()}),e.TgZ(10,"div",8)(11,"div",9),e._uU(12," Sign in "),e.qZA(),e.TgZ(13,"div",10)(14,"div",11)(15,"label",12),e._uU(16,"Email"),e.qZA(),e._UZ(17,"input",13),e.YNc(18,I,2,0,"div",14),e.qZA(),e.TgZ(19,"div",11)(20,"label",15),e._uU(21,"Password"),e.qZA(),e._UZ(22,"input",16),e.qZA(),e.TgZ(23,"button",17),e._uU(24,"Sign in"),e.qZA()()()(),e.TgZ(25,"div",18)(26,"div",19),e._UZ(27,"asl-google-signin-button",20),e.TgZ(28,"div",21)(29,"a",22),e._uU(30,"You dont have an account? Sign up!"),e.qZA()()()()()),2&t&&(e.xp6(9),e.Q6J("formGroup",i.fromGroup),e.xp6(9),e.Q6J("ngIf",null==i.fromGroup.get("email").errors?null:i.fromGroup.get("email").errors.email),e.xp6(5),e.Q6J("disabled",i.fromGroup.invalid))},dependencies:[c.O5,u.yS,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,v.TI]}),o})()},{path:"register",component:(()=>{class o{constructor(t,i,r,a,m,h){this.titleService=t,this.loadingService=i,this.notifyService=r,this.fb=a,this.portalService=m,this.router=h,this.titleService.setTitle("Register"),this.fromGroup=this.fb.group({email:["",s.kI.email],password:["",s.kI.required]})}saveRoles(t){let i=this.dataUser.find(r=>(null==r?void 0:r.role)===t.target.value);this.roleValue=i.role}ngOnInit(){this.fetchDataUser()}fetchDataUser(){this.loadingService.isLoading.next(!0),this.portalService.getRoleName().pipe((0,f.x)(()=>{this.loadingService.isLoading.next(!1)})).subscribe({next:t=>{var i;!t||(this.dataUser=null!==(i=null==t?void 0:t.data)&&void 0!==i?i:[])},error:t=>{var i;this.notifyService.pushNotify.next({type:"error",message:null!==(i=null==t?void 0:t.message)&&void 0!==i?i:"error"})}})}onSubmit(){if(!this.fromGroup.valid)return;this.loadingService.isLoading.next(!0);const t={email:this.fromGroup.get("email").value,password:this.fromGroup.get("password").value,role:""};let i={};this.portalService.register(t).pipe((0,f.x)(()=>{this.loadingService.isLoading.next(!1),this.notifyService.pushNotify.next(i)})).subscribe({next:()=>{i={type:"success",message:"register success"},this.fromGroup.reset(),this.router.navigate(["/login"])},error:r=>{var a;i={type:"error",message:null!==(a=null==r?void 0:r.message)&&void 0!==a?a:"error"}}})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(g.Dx),e.Y36(Z.b),e.Y36(T.c),e.Y36(s.qu),e.Y36(p),e.Y36(u.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-register"]],decls:37,vars:6,consts:[[1,"container","mt-3","bg-light","rounded-3"],["aria-label","breadcrumb bg-light"],[1,"breadcrumb","p-1"],[1,"breadcrumb-item"],["href","#",1,"text-decoration-none"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container"],[1,"d-flex","justify-content-center",3,"formGroup","ngSubmit"],[1,"card","w-25",2,"width","18rem"],[1,"card-header"],[1,"p-3"],[1,"mb-3"],["for","exampleInputEmail",1,"form-label","fw-bold"],["formControlName","email","type","email","id","exampleInputEmail1","aria-describedby","emailHelp",1,"form-control"],["class","alert alert-danger mt-2",4,"ngIf"],["for","exampleInputPassword",1,"form-label","fw-bold"],["formControlName","password","type","password","id","exampleInputPassword",1,"form-control"],[1,"mb-3","row"],["for","role",1,"form-label","fw-bold"],[1,"col","mb-3"],["type","text","list","roles","formControlName","role",1,"form-control",3,"ngModel","ngModelChange","change"],["id","roles"],[3,"value",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn","btn-primary","w-100",3,"disabled"],[1,"d-flex","justify-content-center"],[1,"w-25","text-center","m-3","px-3"],["href","/login",1,"text-decoration-none"],[1,"alert","alert-danger","mt-2"],[4,"ngIf"],[3,"value"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),e._uU(5,"Home"),e.qZA()(),e.TgZ(6,"li",5),e._uU(7,"Register"),e.qZA()()()(),e.TgZ(8,"div",6)(9,"form",7),e.NdJ("ngSubmit",function(){return i.onSubmit()}),e.TgZ(10,"div",8)(11,"div",9),e._uU(12," Sign up "),e.qZA(),e.TgZ(13,"div",10)(14,"div",11)(15,"label",12),e._uU(16,"Email"),e.qZA(),e._UZ(17,"input",13),e.YNc(18,Y,2,1,"div",14),e.qZA(),e.TgZ(19,"div",11)(20,"label",15),e._uU(21,"Password"),e.qZA(),e._UZ(22,"input",16),e.YNc(23,R,2,1,"div",14),e.qZA(),e.TgZ(24,"div",17)(25,"label",18),e._uU(26,"Role"),e.qZA(),e.TgZ(27,"div",19)(28,"input",20),e.NdJ("ngModelChange",function(a){return i.roleValue=a})("change",function(a){return i.saveRoles(a)}),e.qZA(),e.TgZ(29,"datalist",21),e.YNc(30,J,2,2,"option",22),e.qZA()()(),e.TgZ(31,"button",23),e._uU(32,"Sign up"),e.qZA()()()(),e.TgZ(33,"div",24)(34,"div",25)(35,"a",26),e._uU(36,"Already registered? Sign in!"),e.qZA()()()()),2&t&&(e.xp6(9),e.Q6J("formGroup",i.fromGroup),e.xp6(9),e.Q6J("ngIf",i.fromGroup.get("email").invalid&&(i.fromGroup.get("email").dirty||i.fromGroup.get("email").touched)),e.xp6(5),e.Q6J("ngIf",i.fromGroup.get("password").invalid&&(i.fromGroup.get("password").dirty||i.fromGroup.get("password").touched)),e.xp6(5),e.Q6J("ngModel",i.roleValue),e.xp6(2),e.Q6J("ngForOf",i.dataUser),e.xp6(1),e.Q6J("disabled",i.fromGroup.invalid))},dependencies:[c.sg,c.O5,s._Y,s.YN,s.Kr,s.Fj,s.JJ,s.JL,s.sg,s.u]}),o})()},{path:"docs",component:C}]}];let P=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.Bz.forChild(N),u.Bz]}),o})();var F=l(8395);let H=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[p],imports:[c.ez,F.m,P,s.u5,s.UX,v.IL]}),o})()}}]);