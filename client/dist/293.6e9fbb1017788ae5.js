"use strict";(self.webpackChunkWebSPA=self.webpackChunkWebSPA||[]).push([[293],{4293:(ue,Z,s)=>{s.r(Z),s.d(Z,{RecipeModule:()=>de});var d=s(9808),u=s(8505),e=s(4893),k=s(9305);let _=(()=>{class n{constructor(t){this.dataService=t,this.repipeUrl="http://18.168.249.212/api/recipe/"}getAll(t){return this.dataService.get(this.repipeUrl,t).pipe((0,u.b)(i=>i))}store(t){return this.dataService.post(this.repipeUrl+"add",t).pipe((0,u.b)(i=>!0))}edit(t){return this.dataService.putWithId(this.repipeUrl+"update/"+t.recipe_id,t).pipe((0,u.b)(i=>!0))}delete(t){return this.dataService.delete(this.repipeUrl+"delete/"+t)}bulkDelete(t){return this.dataService.delete(this.repipeUrl+"delete_multiple",{body:{ids:t}})}getHistory(t,i){return this.dataService.get(this.repipeUrl+"history/"+t,i).pipe((0,u.b)(o=>o))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(k.D))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var m=s(8168),v=s(7579),T=s(1135),C=s(2722),A=s(8372),g=s(8746),x=s(2313),h=s(7596),f=s(5075),y=s(5517),q=s(2267),b=s(9966),l=s(2382);function I(n,r){1&n&&(e.TgZ(0,"div"),e._uU(1," Name is required. "),e.qZA())}function S(n,r){if(1&n&&(e.TgZ(0,"div",30),e.YNc(1,I,2,0,"div",31),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.recipeForm.get("name").errors.required)}}function U(n,r){1&n&&(e.TgZ(0,"div"),e._uU(1," Description is required. "),e.qZA())}function J(n,r){if(1&n&&(e.TgZ(0,"div",30),e.YNc(1,U,2,0,"div",31),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.recipeForm.get("description").errors.required)}}function N(n,r){1&n&&(e.TgZ(0,"div"),e._uU(1," Version is required. "),e.qZA())}function L(n,r){if(1&n&&(e.TgZ(0,"div",30),e.YNc(1,N,2,0,"div",31),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.recipeForm.get("version").errors.required)}}function w(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",32),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.handleSubmit())}),e._uU(2," Save "),e.qZA(),e.BQk()}}function F(n,r){1&n&&(e.TgZ(0,"button",33),e._UZ(1,"span",34),e.qZA())}let O=(()=>{class n{constructor(t,i,o,a,c){this.fb=t,this.mainService=i,this.loadingService=o,this.notifyService=a,this.router=c,this.model=null,this.onClose=new e.vpe,this.onOk=new e.vpe,this.ngSelect=!0,this.isHandling=!1,this.backDrop=document.querySelector(".modal-backdrop"),this.unsubscribe=new v.x}ngOnInit(){this.backDrop.style.display="block",this.recipeForm=this.fb.group({name:[this.model.name,l.kI.required],description:[this.model.description,l.kI.required],version:[this.model.version],image:[this.model.image],enabled:[this.model.enabled]}),this.ngSelect=this.model.enabled}handleSubmit(){var t,i;if(!this.recipeForm.valid)return;this.loadingService.isLoading.next(!0);const o={recipe_id:this.model.recipe_id,name:this.recipeForm.get("name").value,description:this.recipeForm.get("description").value,version:null!==(t=this.recipeForm.get("version").value)&&void 0!==t?t:"1.0",image:null!==(i=this.recipeForm.get("image").value)&&void 0!==i?i:"",enabled:this.recipeForm.get("enabled").value,user_id:localStorage.getItem("user_id")};let a={};this.mainService.edit(o).pipe((0,g.x)(()=>{this.loadingService.isLoading.next(!1),this.notifyService.pushNotify.next(a)})).subscribe({next:()=>{a={type:"success",message:"update recipe success"};for(const c in o)this.model[c]=o[c];this.model.updated_at=(new Date).toISOString(),this.onClose.emit(!0),this.router.navigate(["/admin/recipe/"])},error:c=>{var p;a={type:"error",message:null!==(p=null==c?void 0:c.message)&&void 0!==p?p:"error"}},complete:()=>{this.isHandling=!0,this.removeValidators(),this.recipeForm.reset(),this.closeModal()}})}closeModal(){this.onClose.emit(!0)}ngOnDestroy(){this.backDrop.style.display="none",this.unsubscribe.complete(),this.unsubscribe.unsubscribe()}removeValidators(){var t,i;for(const o in this.recipeForm.controls)null===(t=this.recipeForm.get(o))||void 0===t||t.clearValidators(),null===(i=this.recipeForm.get(o))||void 0===i||i.updateValueAndValidity()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.qu),e.Y36(_),e.Y36(h.b),e.Y36(f.c),e.Y36(m.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-recipe-edit-item"]],inputs:{model:"model"},outputs:{onClose:"onClose",onOk:"onOk"},decls:44,vars:7,consts:[["tabindex","-1","role","dialog",1,"modal","fade","show",2,"display","flex","align-items","center","justify-content","center",3,"click"],[1,"modal-content",2,"width","72%",3,"click"],[1,"modal-header"],["id","mySmallModalLabel",1,"modal-title","h4"],["type","button","data-dismiss","modal","aria-label","Close",1,"btn","btn-xs","btn-icon","btn-ghost-secondary",3,"click"],[1,"tio-clear","tio-lg"],[1,"modal-body"],[1,"container","pb-5"],[3,"formGroup"],[1,"row"],[1,"mb-3","col-6"],["for","name",1,"form-label","fw-bold"],["type","text","id","name","aria-describedby","nameHelp","formControlName","name",1,"form-control"],["class","alert alert-danger mt-2",4,"ngIf"],["for","description",1,"form-label","fw-bold"],["type","text","id","description","formControlName","description",1,"form-control"],[1,"mb-3"],["for","version",1,"form-label","fw-bold"],["type","text","id","version","formControlName","version",1,"form-control"],["for","image",1,"form-label","fw-bold"],["type","text","id","image","formControlName","image",1,"form-control"],[1,"mb-3","col-xxl-1","col-md-2","col-sm-3"],["for","enabled",1,"form-label","fw-bold"],["aria-label","enabled","formControlName","enabled",1,"form-select",3,"ngModel","ngModelChange"],["value","false"],["value","true"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-sm","btn-white",3,"click"],[4,"ngIf","ngIfElse"],["notHandle",""],[1,"alert","alert-danger","mt-2"],[4,"ngIf"],["type","submit",1,"btn","btn-sm","btn-warning",3,"click"],["disabled","","type","button",1,"btn","btn-sm","btn-warning","btn-loader"],[1,"loader"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.NdJ("click",function(){return i.closeModal()}),e.TgZ(1,"div",1),e.NdJ("click",function(a){return a.stopPropagation()}),e.TgZ(2,"div",2)(3,"h5",3),e._uU(4,"Update action"),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return i.closeModal()}),e._UZ(6,"i",5),e.qZA()(),e.TgZ(7,"div",6)(8,"div",7)(9,"form",8)(10,"div",9)(11,"div",10)(12,"label",11),e._uU(13,"Name"),e.qZA(),e._UZ(14,"input",12),e.YNc(15,S,2,1,"div",13),e.qZA(),e.TgZ(16,"div",10)(17,"label",14),e._uU(18,"Description"),e.qZA(),e._UZ(19,"input",15),e.YNc(20,J,2,1,"div",13),e.qZA()(),e.TgZ(21,"div",16)(22,"label",17),e._uU(23,"Version"),e.qZA(),e._UZ(24,"input",18),e.YNc(25,L,2,1,"div",13),e.qZA(),e.TgZ(26,"div",16)(27,"label",19),e._uU(28,"Image"),e.qZA(),e._UZ(29,"input",20),e.qZA(),e.TgZ(30,"div",21)(31,"label",22),e._uU(32,"Status"),e.qZA(),e.TgZ(33,"select",23),e.NdJ("ngModelChange",function(a){return i.ngSelect=a}),e.TgZ(34,"option",24),e._uU(35,"Disable"),e.qZA(),e.TgZ(36,"option",25),e._uU(37,"Enable"),e.qZA()()()()()(),e.TgZ(38,"div",26)(39,"button",27),e.NdJ("click",function(){return i.closeModal()}),e._uU(40,"Cancel"),e.qZA(),e.YNc(41,w,3,0,"ng-container",28),e.YNc(42,F,2,0,"ng-template",null,29,e.W1O),e.qZA()()()),2&t){const o=e.MAs(43);e.xp6(9),e.Q6J("formGroup",i.recipeForm),e.xp6(6),e.Q6J("ngIf",i.recipeForm.get("name").invalid&&(i.recipeForm.get("name").dirty||i.recipeForm.get("name").touched)),e.xp6(5),e.Q6J("ngIf",i.recipeForm.get("description").invalid&&(i.recipeForm.get("description").dirty||i.recipeForm.get("description").touched)),e.xp6(5),e.Q6J("ngIf",i.recipeForm.get("version").invalid&&(i.recipeForm.get("version").dirty||i.recipeForm.get("version").touched)),e.xp6(8),e.Q6J("ngModel",i.ngSelect),e.xp6(8),e.Q6J("ngIf",!i.isHandling)("ngIfElse",o)}},dependencies:[d.O5,l._Y,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.JL,l.sg,l.u],encapsulation:2}),n})();function H(n,r){if(1&n&&(e.TgZ(0,"tr")(1,"td",9),e._uU(2),e.qZA(),e.TgZ(3,"td",16),e._uU(4),e.qZA(),e.TgZ(5,"td",9),e._uU(6),e.qZA(),e.TgZ(7,"td",16),e._uU(8),e.qZA(),e.TgZ(9,"td",16),e._uU(10),e.qZA(),e.TgZ(11,"td",16),e._uU(12),e.qZA(),e.TgZ(13,"td",16),e._uU(14),e.qZA()()),2&n){const t=r.$implicit,i=r.index;e.xp6(2),e.Oqu(i+1),e.xp6(2),e.Oqu(t.log_id),e.xp6(2),e.Oqu(t.action),e.xp6(2),e.Oqu(t.created_at),e.xp6(2),e.Oqu(t.email_created_by),e.xp6(2),e.Oqu(t.updated_at),e.xp6(2),e.Oqu(t.email_updated_by)}}function D(n,r){1&n&&(e.TgZ(0,"button",17),e._UZ(1,"span",18),e.qZA())}let Y=(()=>{class n{constructor(t,i,o){this.recipeService=t,this.loadingService=i,this.notifyService=o,this.model=null,this.onClose=new e.vpe,this.onOk=new e.vpe,this.ngSelect=!0,this.isHandling=!1,this.data=[],this.unsubscribe=new v.x,this.filterInput=new T.X({page:1,page_size:3,recipe_id:null})}ngOnInit(){this.subsribeFilter()}ngOnDestroy(){this.unsubscribe.next(null),this.unsubscribe.complete()}subsribeFilter(){this.filterInput.pipe((0,C.R)(this.unsubscribe),(0,u.b)(()=>{}),(0,A.b)(500)).subscribe(()=>{this.fetchData()})}fetchData(){this.loadingService.isLoading.next(!0),this.recipeService.getHistory(this.model.recipe_id,this.filterInput.value).pipe((0,g.x)(()=>{this.loadingService.isLoading.next(!1)})).subscribe({next:t=>{var i;!t||(this.data=null!==(i=null==t?void 0:t.data)&&void 0!==i?i:[])},error:t=>{var i;this.notifyService.pushNotify.next({type:"error",message:null!==(i=null==t?void 0:t.message)&&void 0!==i?i:"error"})}})}pageChanged(t){console.log(this.filterInput),this.filterInput.next(Object.assign(Object.assign({},this.filterInput.value),{page:t}))}filter(t,i){this.filterInput.next(Object.assign(Object.assign({},this.filterInput.value),{[t]:i.target.value}))}closeModal(){this.onClose.emit(!0)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_),e.Y36(h.b),e.Y36(f.c))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-recipe-history-item"]],inputs:{model:"model"},outputs:{onClose:"onClose",onOk:"onOk"},decls:33,vars:1,consts:[["tabindex","-1","role","dialog",1,"modal","fade","show",2,"display","flex","align-items","center","justify-content","center"],[1,"modal-content",2,"width","72%"],[1,"modal-header"],["id","mySmallModalLabel",1,"modal-title","h4"],["type","button","data-dismiss","modal","aria-label","Close",1,"btn","btn-xs","btn-icon","btn-ghost-secondary",3,"click"],[1,"tio-clear","tio-lg"],[1,"container","pb-5"],[1,"table-responsive","scroll-bar"],["data-bs-spy","scroll",1,"table","table-striped","table-hover","table-bordered","table-default"],["scope","col","colspan","1"],["scope","col","colspan","4",1,"col-title","text-center"],["scope","col","colspan","1",1,"col-title","text-center","name"],[4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-sm","btn-white",3,"click"],["notHandle",""],["scope","col","colspan","4"],["disabled","","type","button",1,"btn","btn-sm","btn-warning","btn-loader"],[1,"loader"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5",3),e._uU(4,"Log"),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return i.closeModal()}),e._UZ(6,"i",5),e.qZA()(),e.TgZ(7,"div",6)(8,"div",7)(9,"table",8)(10,"thead")(11,"tr")(12,"th",9),e._uU(13,"#"),e.qZA(),e.TgZ(14,"th",10),e._uU(15,"log_id"),e.qZA(),e.TgZ(16,"th",11),e._uU(17,"action"),e.qZA(),e.TgZ(18,"th",10),e._uU(19,"created_at"),e.qZA(),e.TgZ(20,"th",10),e._uU(21,"created_by"),e.qZA(),e.TgZ(22,"th",10),e._uU(23,"updated_at"),e.qZA(),e.TgZ(24,"th",10),e._uU(25,"updated_by"),e.qZA()()(),e.TgZ(26,"tbody"),e.YNc(27,H,15,7,"tr",12),e.qZA()()()(),e.TgZ(28,"div",13)(29,"button",14),e.NdJ("click",function(){return i.closeModal()}),e._uU(30,"Cancel"),e.qZA(),e.YNc(31,D,2,0,"ng-template",null,15,e.W1O),e.qZA()()()),2&t&&(e.xp6(27),e.Q6J("ngForOf",i.data))},dependencies:[d.sg],encapsulation:2}),n})();function M(n,r){1&n&&(e.TgZ(0,"button",28),e._uU(1," Create Recipe "),e.qZA()),2&n&&e.Q6J("routerLink","create")}function E(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.popupState.bulkDelete=!0)}),e._uU(1," Delete Recipes "),e.qZA()}}function Q(n,r){1&n&&(e.TgZ(0,"th",30),e._uU(1,"action"),e.qZA())}function R(n,r){1&n&&e._UZ(0,"th",31)}function j(n,r){1&n&&(e.TgZ(0,"td",35),e._uU(1,"hiddencolumns"),e.qZA())}function P(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"td",36)(1,"button",37),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,a=e.oxw();return e.KtG(a.handleHistory(o))}),e.O4$(),e.TgZ(2,"svg",38),e._UZ(3,"path",39)(4,"path",40),e.qZA()(),e.kcU(),e.TgZ(5,"button",37),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,a=e.oxw();return e.KtG(a.handleEdit(o))}),e.O4$(),e.TgZ(6,"svg",41),e._UZ(7,"path",42),e.qZA()(),e.kcU(),e.TgZ(8,"button",43),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,a=e.oxw();return e.KtG(a.handleDelete(o))}),e.O4$(),e.TgZ(9,"svg",44),e._UZ(10,"path",45),e.qZA()()()}}function G(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td",13)(2,"input",19),e.NdJ("change",function(o){const c=e.CHM(t).index,p=e.oxw();return e.KtG(p.checkItem(o,c))}),e.qZA()(),e.TgZ(3,"td",32),e._uU(4),e.qZA(),e.TgZ(5,"td",32),e._uU(6),e.qZA(),e.TgZ(7,"td",32),e._uU(8),e.qZA(),e.TgZ(9,"td",32),e._uU(10),e.qZA(),e.TgZ(11,"td",32),e._uU(12),e.qZA(),e.TgZ(13,"td",32),e._uU(14),e.qZA(),e.TgZ(15,"td",32),e._uU(16),e.qZA(),e.TgZ(17,"td",32),e._uU(18),e.qZA(),e.YNc(19,j,2,0,"td",33),e.YNc(20,P,11,0,"td",34),e.qZA()}if(2&n){const t=r.$implicit,i=e.oxw();e.xp6(2),e.Q6J("checked",t.checked),e.xp6(2),e.Oqu(t.recipe_id),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.description),e.xp6(2),e.Oqu(t.image),e.xp6(2),e.Oqu(t.version),e.xp6(2),e.Oqu(!0===t.enabled?"Enable":"Disable"),e.xp6(2),e.Oqu(t.created_at),e.xp6(2),e.Oqu(t.updated_at),e.xp6(1),e.Q6J("ngIf",i.isActiveAdmin),e.xp6(1),e.Q6J("ngIf",i.isActiveAdmin)}}function K(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"app-recipe-history-item",46),e.NdJ("onOk",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.okDelete())})("onClose",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.popupState.history=!1)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("model",t.itemHandle)}}function z(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"app-recipe-edit-item",46),e.NdJ("onOk",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.fetchData())})("onClose",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.popupState.edit=!1)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("model",t.itemHandle)}}function B(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"app-popup-delete",47),e.NdJ("onOk",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.okDelete())})("onClose",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.popupState.delete=!1)}),e.qZA()}2&n&&e.Q6J("isHandling",!1)}function V(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"app-popup-delete",47),e.NdJ("onOk",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.okBulkDelete())})("onClose",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.popupState.bulkDelete=!1)}),e.qZA()}2&n&&e.Q6J("isHandling",!1)}const X=function(n,r,t){return{itemsPerPage:n,currentPage:r,totalItems:t}},$=function(n,r){return{total:n,count:r}};function ee(n,r){1&n&&(e.TgZ(0,"div"),e._uU(1," Name is required. "),e.qZA())}function te(n,r){if(1&n&&(e.TgZ(0,"div",29),e.YNc(1,ee,2,0,"div",30),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.recipeForm.get("name").errors.required)}}function ie(n,r){1&n&&(e.TgZ(0,"div"),e._uU(1," Description is required. "),e.qZA())}function ne(n,r){if(1&n&&(e.TgZ(0,"div",29),e.YNc(1,ie,2,0,"div",30),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.recipeForm.get("description").errors.required)}}function oe(n,r){1&n&&(e.TgZ(0,"div"),e._uU(1," Version is required. "),e.qZA())}function re(n,r){if(1&n&&(e.TgZ(0,"div",29),e.YNc(1,oe,2,0,"div",30),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.recipeForm.get("version").errors.required)}}const se=[{path:"",component:(()=>{class n{constructor(t,i,o,a){this.titleService=t,this.recipeService=i,this.loadingService=o,this.notifyService=a,this.unsubscribe=new v.x,this.filterInput=new T.X({page:1,page_size:10,name:null,description:null,image:null,version:null,enabled:null,recipe_id:null}),this.isCheckAllItem=!1,this.hasItemDelete=!1,this.config={itemsPerPage:2,currentPage:1,totalItems:0},this.data=[],this.p=1,this.itemHandle=null,this.popupState={edit:!1,delete:!1,history:!1,bulkDelete:!1},this.titleService.setTitle("List Recipe"),this.loadingService.isLoading.next(!0)}ngOnDestroy(){this.unsubscribe.next(null),this.unsubscribe.complete()}ngOnInit(){this.subsribeFilter(),this.isActiveAdmin=1!=JSON.parse(localStorage.getItem("status"))&&2!=JSON.parse(localStorage.getItem("status"))}subsribeFilter(){this.filterInput.pipe((0,C.R)(this.unsubscribe),(0,u.b)(()=>{}),(0,A.b)(500)).subscribe(()=>{this.isCheckAllItem=!1,this.hasItemDelete=!1,this.fetchData()})}fetchData(){this.resetPopupState(),this.loadingService.isLoading.next(!0),this.recipeService.getAll(this.filterInput.value).pipe((0,g.x)(()=>{this.loadingService.isLoading.next(!1)})).subscribe({next:t=>{var i;!t||(this.data=null!==(i=null==t?void 0:t.data)&&void 0!==i?i:[],this.config.totalItems=t.pagination.total_records,this.config.itemsPerPage=t.pagination.page_size)},error:t=>{var i;this.notifyService.pushNotify.next({type:"error",message:null!==(i=null==t?void 0:t.message)&&void 0!==i?i:"error"})}})}setPageSize(t){this.filterInput.next(Object.assign(Object.assign({},this.filterInput.value),{page_size:t}))}pageChanged(t){this.filterInput.next(Object.assign(Object.assign({},this.filterInput.value),{page:t}))}filter(t,i){this.filterInput.next(Object.assign(Object.assign({},this.filterInput.value),{[t]:i.target.value}))}checkItem(t,i){this.data[i].checked=t.target.checked,this.setCheckAllItem(),this.showDeleteBtn()}checkAllItem(t){const i=t.target.checked;i&&(this.isCheckAllItem=!0),this.data.forEach(o=>{o.checked=i}),this.showDeleteBtn()}setCheckAllItem(){this.isCheckAllItem=!!this.data.every(t=>t.checked)}showDeleteBtn(){this.hasItemDelete=!!this.data.some(t=>t.checked)}sort(t,i){const o=JSON.stringify({[t]:i});this.filterInput.next(Object.assign(Object.assign({},this.filterInput.value),{sort:o}))}handleEdit(t){this.itemHandle=t,this.resetPopupState(),this.popupState.edit=!0}handleHistory(t){this.itemHandle=t,this.resetPopupState(),this.popupState.history=!0}handleDelete(t){this.itemHandle=t,this.resetPopupState(),this.popupState.delete=!0}okDelete(){this.loadingService.isLoading.next(!0),this.recipeService.delete(this.itemHandle.recipe_id).subscribe({next:()=>{this.fetchData()},error:t=>{var i;this.notifyService.pushNotify.next({type:"error",message:null!==(i=null==t?void 0:t.message)&&void 0!==i?i:"error"}),this.loadingService.isLoading.next(!1)}})}okBulkDelete(){this.loadingService.isLoading.next(!0),this.recipeService.bulkDelete(this.data.filter(t=>t.checked).map(t=>t.recipe_id)).subscribe({next:()=>{this.fetchData()},error:t=>{var i;this.notifyService.pushNotify.next({type:"error",message:null!==(i=null==t?void 0:t.message)&&void 0!==i?i:"error"}),this.loadingService.isLoading.next(!1)}})}resetPopupState(){for(const t in this.popupState)this.popupState[t]=!1;this.isCheckAllItem=!1,this.hasItemDelete=!1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x.Dx),e.Y36(_),e.Y36(h.b),e.Y36(f.c))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-list"]],decls:98,vars:21,consts:[[1,"container","mt-3","bg-light","rounded-3"],["aria-label","breadcrumb bg-light"],[1,"breadcrumb","p-1"],[1,"breadcrumb-item"],["href","#",1,"text-decoration-none"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container","mt-4"],[1,"fw-bold"],["class","btn btn-green text-white mb-4",3,"routerLink",4,"ngIf"],["class","btn btn-danger text-white mb-4","style","margin-left: 8px",3,"click",4,"ngIf"],[1,"container","pb-5"],[2,"overflow-x","scroll"],["data-bs-spy","scroll",1,"table","table-striped","table-hover","table-bordered",2,"width","1800px"],["colspan","1"],[1,"text-primary","text-center"],[1,"d-flex","align-items-center","justify-content-between"],[1,"arrow",3,"click"],[1,"arrow","arrow-down",3,"click"],["class","text-primary text-center fixed","scope","col","colspan","2",4,"ngIf"],["type","checkbox",1,"form-check-input",3,"checked","change"],[1,"form-control",3,"keyup"],["colspan","2","class","",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"d-flex","align-items-center",2,"gap","10"],[3,"model","onOk"],[3,"pageChange"],[3,"model","onOk","onClose",4,"ngIf"],[3,"isHandling","onOk","onClose",4,"ngIf"],[1,"btn","btn-green","text-white","mb-4",3,"routerLink"],[1,"btn","btn-danger","text-white","mb-4",2,"margin-left","8px",3,"click"],["scope","col","colspan","2",1,"text-primary","text-center","fixed"],["colspan","2",1,""],[2,"white-space","nowrap"],["scope","col","colspan","2",4,"ngIf"],["class","fixed d-flex justify-content-between align-item-center","scope","col","colspan","2",4,"ngIf"],["scope","col","colspan","2"],["scope","col","colspan","2",1,"fixed","d-flex","justify-content-between","align-item-center"],[1,"p-0","mx-2","btn","btn-link",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-clock-history"],["d","M8 4.5a.5.5 0 0 1 .5.5V8l2.93 1.93a.5.5 0 0 1-.16.84L8 10.16l-2.27 1.27a.5.5 0 0 1-.84-.16L6 8.5V5a.5.5 0 0 1 .5-.5z"],["d","M8 0a8 8 0 1 0 8 8A8 8 0 0 0 8 0zm4.5 9a.5.5 0 0 1-.5.5H8.5a.5.5 0 0 1-.5-.5V3a.5.5 0 0 1 1 0v5.5h3a.5.5 0 0 1 .5.5z"],["color","#2F80ED","xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-pen"],["d","m13.498.795.149-.149a1.207 1.207 0 1 1 1.707 1.708l-.149.148a1.5 1.5 0 0 1-.059 2.059L4.854 14.854a.5.5 0 0 1-.233.131l-4 1a.5.5 0 0 1-.606-.606l1-4a.5.5 0 0 1 .131-.232l9.642-9.642a.5.5 0 0 0-.642.056L6.854 4.854a.5.5 0 1 1-.708-.708L9.44.854A1.5 1.5 0 0 1 11.5.796a1.5 1.5 0 0 1 1.998-.001zm-.644.766a.5.5 0 0 0-.707 0L1.95 11.756l-.764 3.057 3.057-.764L14.44 3.854a.5.5 0 0 0 0-.708l-1.585-1.585z"],[1,"p-0","btn","btn-link",3,"click"],["color","#2F80ED","xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-trash3"],["d","M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z"],[3,"model","onOk","onClose"],[3,"isHandling","onOk","onClose"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),e._uU(5,"Home"),e.qZA()(),e.TgZ(6,"li",5),e._uU(7,"Recipe"),e.qZA()()()(),e.TgZ(8,"div",6)(9,"h2",7),e._uU(10,"Recipe"),e.qZA(),e.YNc(11,M,2,1,"button",8),e.YNc(12,E,2,0,"button",9),e.qZA(),e.TgZ(13,"div",10)(14,"div",11)(15,"table",12)(16,"thead")(17,"tr")(18,"th",13),e._uU(19,"#"),e.qZA(),e.TgZ(20,"th",14),e._uU(21,"recipe_id"),e.qZA(),e.TgZ(22,"th",14)(23,"div",15)(24,"span"),e._uU(25," name "),e.qZA(),e.TgZ(26,"div")(27,"div",16),e.NdJ("click",function(){return i.sort("name","asc")}),e.qZA(),e.TgZ(28,"div",17),e.NdJ("click",function(){return i.sort("name","desc")}),e.qZA()()()(),e.TgZ(29,"th",14)(30,"div",15)(31,"span"),e._uU(32," description "),e.qZA(),e.TgZ(33,"div")(34,"div",16),e.NdJ("click",function(){return i.sort("description","asc")}),e.qZA(),e.TgZ(35,"div",17),e.NdJ("click",function(){return i.sort("description","desc")}),e.qZA()()()(),e.TgZ(36,"th",14)(37,"div",15)(38,"span"),e._uU(39," image "),e.qZA(),e.TgZ(40,"div")(41,"div",16),e.NdJ("click",function(){return i.sort("image","asc")}),e.qZA(),e.TgZ(42,"div",17),e.NdJ("click",function(){return i.sort("image","desc")}),e.qZA()()()(),e.TgZ(43,"th",14)(44,"div",15)(45,"span"),e._uU(46," version "),e.qZA(),e.TgZ(47,"div")(48,"div",16),e.NdJ("click",function(){return i.sort("version","asc")}),e.qZA(),e.TgZ(49,"div",17),e.NdJ("click",function(){return i.sort("version","desc")}),e.qZA()()()(),e.TgZ(50,"th",14)(51,"div",15)(52,"span"),e._uU(53," enabled "),e.qZA(),e.TgZ(54,"div")(55,"div",16),e.NdJ("click",function(){return i.sort("enabled","asc")}),e.qZA(),e.TgZ(56,"div",17),e.NdJ("click",function(){return i.sort("enabled","desc")}),e.qZA()()()(),e.TgZ(57,"th",14)(58,"div",15)(59,"span"),e._uU(60," created_at "),e.qZA(),e.TgZ(61,"div")(62,"div",16),e.NdJ("click",function(){return i.sort("created_at","asc")}),e.qZA(),e.TgZ(63,"div",17),e.NdJ("click",function(){return i.sort("created_at","desc")}),e.qZA()()()(),e.TgZ(64,"th",14)(65,"div",15)(66,"span"),e._uU(67," updated_at "),e.qZA(),e.TgZ(68,"div")(69,"div",16),e.NdJ("click",function(){return i.sort("updated_at","asc")}),e.qZA(),e.TgZ(70,"div",17),e.NdJ("click",function(){return i.sort("updated_at","desc")}),e.qZA()()()(),e.YNc(71,Q,2,0,"th",18),e.qZA(),e.TgZ(72,"tr")(73,"th",13)(74,"input",19),e.NdJ("change",function(a){return i.checkAllItem(a)}),e.qZA()(),e.TgZ(75,"th")(76,"input",20),e.NdJ("keyup",function(a){return i.filter("recipe_id",a)}),e.qZA()(),e.TgZ(77,"th")(78,"input",20),e.NdJ("keyup",function(a){return i.filter("name",a)}),e.qZA()(),e.TgZ(79,"th")(80,"input",20),e.NdJ("keyup",function(a){return i.filter("description",a)}),e.qZA()(),e.TgZ(81,"th")(82,"input",20),e.NdJ("keyup",function(a){return i.filter("image",a)}),e.qZA()(),e.TgZ(83,"th")(84,"input",20),e.NdJ("keyup",function(a){return i.filter("version",a)}),e.qZA()(),e.TgZ(85,"th")(86,"input",20),e.NdJ("keyup",function(a){return i.filter("enabled",a)}),e.qZA()(),e.YNc(87,R,1,0,"th",21),e.qZA()(),e.TgZ(88,"tbody"),e.YNc(89,G,21,11,"tr",22),e.ALo(90,"paginate"),e.qZA()()(),e.TgZ(91,"div",23)(92,"app-menu-pagination",24),e.NdJ("onOk",function(a){return i.setPageSize(a)}),e.qZA(),e.TgZ(93,"pagination-controls",25),e.NdJ("pageChange",function(a){return i.p=a})("pageChange",function(a){return i.pageChanged(a)}),e.qZA()()(),e.YNc(94,K,1,1,"app-recipe-history-item",26),e.YNc(95,z,1,1,"app-recipe-edit-item",26),e.YNc(96,B,1,1,"app-popup-delete",27),e.YNc(97,V,1,1,"app-popup-delete",27)),2&t&&(e.xp6(11),e.Q6J("ngIf",i.isActiveAdmin),e.xp6(1),e.Q6J("ngIf",i.isActiveAdmin&&i.hasItemDelete),e.xp6(59),e.Q6J("ngIf",i.isActiveAdmin),e.xp6(3),e.Q6J("checked",i.isCheckAllItem),e.xp6(13),e.Q6J("ngIf",i.isActiveAdmin),e.xp6(2),e.Q6J("ngForOf",e.xi3(90,11,i.data,e.kEZ(14,X,i.config.itemsPerPage,i.p,i.config.totalItems))),e.xp6(3),e.Q6J("model",e.WLB(18,$,null==i.config?null:i.config.totalItems,null==i.data?null:i.data.length)),e.xp6(2),e.Q6J("ngIf",i.popupState.history),e.xp6(1),e.Q6J("ngIf",i.popupState.edit),e.xp6(1),e.Q6J("ngIf",i.popupState.delete),e.xp6(1),e.Q6J("ngIf",i.popupState.bulkDelete))},dependencies:[d.sg,d.O5,y.w,q.V,m.rH,b.LS,O,Y,b._s],encapsulation:2}),n})()},{path:"create",component:(()=>{class n{constructor(t,i,o,a,c,p){this.titleService=t,this.fb=i,this.recipeService=o,this.loadingService=a,this.notifyService=c,this.router=p,this.editorOptions={theme:"vs-dark",language:"sql"},this.titleService.setTitle("Create Recipe"),this.recipeForm=this.fb.group({name:["",l.kI.required],description:["",l.kI.required],image:[""],version:["",l.kI.required],enabled:[!0]})}onSubmit(){if(!this.recipeForm.valid)return;this.loadingService.isLoading.next(!0);const t={name:this.recipeForm.get("name").value,description:this.recipeForm.get("description").value,image:this.recipeForm.get("image").value,version:this.recipeForm.get("version").value,enabled:this.recipeForm.get("enabled").value,user_id:localStorage.getItem("user_id")};let i={};this.recipeService.store(t).pipe((0,g.x)(()=>{this.notifyService.pushNotify.next(i)})).subscribe({next:()=>{i={type:"success",message:"create recipe success"},this.recipeForm.reset(),this.router.navigate(["/admin/recipe/"])},error:o=>{var a;i={type:"error",message:null!==(a=null==o?void 0:o.message)&&void 0!==a?a:"error"},this.loadingService.isLoading.next(!1)}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x.Dx),e.Y36(l.qu),e.Y36(_),e.Y36(h.b),e.Y36(f.c),e.Y36(m.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-create"]],decls:46,vars:6,consts:[[1,"container","mt-3"],["aria-label","breadcrumb",1,"rounded-3","bg-light","nav-category"],[1,"breadcrumb","p-1"],[1,"breadcrumb-item"],["href","#",1,"text-decoration-none"],["aria-current","page",1,"breadcrumb-item","active"],[1,"text-decoration-none",3,"routerLink"],["aria-current","page",1,"breadcrumb-item"],[1,"container","mt-4"],[1,"fw-bold"],[1,"container","pb-5"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","name",1,"form-label","fw-bold"],["type","text","id","name","aria-describedby","nameHelp","formControlName","name",1,"form-control"],["class","alert alert-danger mt-2",4,"ngIf"],["for","description",1,"form-label","fw-bold"],["type","text","id","description","formControlName","description",1,"form-control"],["for","image",1,"form-label","fw-bold"],["type","text","id","image","formControlName","image",1,"form-control"],["for","version",1,"form-label","fw-bold"],["type","text","id","version","formControlName","version",1,"form-control"],[1,"mb-3","row"],["for","enabled",1,"form-label","fw-bold"],[1,"col-sm-2"],["aria-label","enabled","formControlName","enabled",1,"form-select"],["value","false"],["value","true","selected",""],["type","submit",1,"btn","btn-success-custom","text-white",3,"disabled"],[1,"alert","alert-danger","mt-2"],[4,"ngIf"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),e._uU(5,"Home"),e.qZA()(),e.TgZ(6,"li",5)(7,"a",6),e._uU(8," Recipe "),e.qZA()(),e.TgZ(9,"li",7),e._uU(10,"Create Recipe"),e.qZA()()()(),e.TgZ(11,"div",8)(12,"h2",9),e._uU(13,"Create Recipe"),e.qZA()(),e.TgZ(14,"div",10)(15,"form",11),e.NdJ("ngSubmit",function(){return i.onSubmit()}),e.TgZ(16,"div",12)(17,"label",13),e._uU(18,"Name"),e.qZA(),e._UZ(19,"input",14),e.YNc(20,te,2,1,"div",15),e.qZA(),e.TgZ(21,"div",12)(22,"label",16),e._uU(23,"Description"),e.qZA(),e._UZ(24,"input",17),e.YNc(25,ne,2,1,"div",15),e.qZA(),e.TgZ(26,"div",12)(27,"label",18),e._uU(28,"Image URL"),e.qZA(),e._UZ(29,"input",19),e.qZA(),e.TgZ(30,"div",12)(31,"label",20),e._uU(32,"Version"),e.qZA(),e._UZ(33,"input",21),e.YNc(34,re,2,1,"div",15),e.qZA(),e.TgZ(35,"div",22)(36,"label",23),e._uU(37,"Status"),e.qZA(),e.TgZ(38,"div",24)(39,"select",25)(40,"option",26),e._uU(41,"Disable"),e.qZA(),e.TgZ(42,"option",27),e._uU(43,"Enable"),e.qZA()()()(),e.TgZ(44,"button",28),e._uU(45,"Save"),e.qZA()()()),2&t&&(e.xp6(7),e.Q6J("routerLink","/admin/recipe"),e.xp6(8),e.Q6J("formGroup",i.recipeForm),e.xp6(5),e.Q6J("ngIf",i.recipeForm.get("name").invalid&&(i.recipeForm.get("name").dirty||i.recipeForm.get("name").touched)),e.xp6(5),e.Q6J("ngIf",i.recipeForm.get("description").invalid&&(i.recipeForm.get("description").dirty||i.recipeForm.get("description").touched)),e.xp6(9),e.Q6J("ngIf",i.recipeForm.get("version").invalid&&(i.recipeForm.get("version").dirty||i.recipeForm.get("version").touched)),e.xp6(10),e.Q6J("disabled",i.recipeForm.invalid))},dependencies:[d.O5,m.yS,l._Y,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.JL,l.sg,l.u]}),n})(),canActivate:[s(2385).D]}];let ce=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[m.Bz.forChild(se),m.Bz]}),n})();var pe=s(8395);let de=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[_],imports:[d.ez,pe.m,ce,l.UX,l.u5,b.JX]}),n})()}}]);